<!DOCTYPE html>
<html>
    <head>
        <title>Test SMS URI Page</title>
    </head>
    <body>
        <h1>Test SMS URI Page</h1>
        <p>
            Fill out your message and click the button below to open your SMS client with the message pre-populated, ready to send to +1234567890.
            Ensure to test this on a mobile device that can send SMS.
        </p>
        <textarea id="messageTextArea" rows="4" cols="50" placeholder="Enter your SMS message here..."></textarea>
        <br>
        <button onclick="redirectToSms()">Send SMS</button>
        <script>
        function getMobileOperatingSystem() {
          var userAgent = navigator.userAgent || navigator.vendor || window.opera;

          if ( userAgent.match( /iPad/i ) || userAgent.match( /iPhone/i ) || userAgent.match( /iPod/i ) ) { return 'iOS'; }

          else { return 'Not iOS'; }
        }

        function redirectToSms() {
          var body = document.getElementById('messageTextArea').value;

          var number = '+1234567890';

          var device = getMobileOperatingSystem();
          var smsLink;
          if(device == 'iOS') {
            smsLink = "sms://" + number + "&body=" + encodeURIComponent(body);
          } else {
            smsLink = "sms:" + number + "?body=" + encodeURIComponent(body);
          }

          console.log(smsLink)
          window.location.href = smsLink;
        }
        </script>
    </body>
</html>
